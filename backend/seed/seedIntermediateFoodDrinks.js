const mongoose = require('mongoose');
const path = require('path');
const dotenv = require('dotenv');

dotenv.config({ path: path.join(__dirname, '../config.env') });

// Define Schema
const foodDrinksSchema = new mongoose.Schema({
  thai: String,
  roman: String,
  en: String,
  category: String,
  type: String,
  level: String,
  imageUrl: String,
  emoji: String,
  audioText: String,
  tags: [String],
  isActive: Boolean,
  createdAt: { type: Date, default: Date.now },
  updatedAt: { type: Date, default: Date.now },
}, { collection: 'food_drinks_vocab' });

const FoodDrinksVocab = mongoose.model('FoodDrinksVocab', foodDrinksSchema);

// Seed Data
const foodDrinksData = [
  {
    thai: '‡∏Ç‡πâ‡∏≤‡∏ß‡∏ú‡∏±‡∏î',
    roman: 'khao phat',
    en: 'fried rice',
    category: 'thai-food',
    type: 'dish',
    level: 'Intermediate',
    imageUrl: '/assets/food_drinks/khao_phat.jpg',
    emoji: 'üçö',
    audioText: '‡∏Ç‡πâ‡∏≤‡∏ß‡∏ú‡∏±‡∏î',
    tags: ['popular', 'lunch'],
    isActive: true,
  },
  {
    thai: '‡∏ú‡∏±‡∏î‡∏Å‡∏∞‡πÄ‡∏û‡∏£‡∏≤',
    roman: 'phat kaphrao',
    en: 'basil stir-fry',
    category: 'thai-food',
    type: 'dish',
    level: 'Intermediate',
    imageUrl: '/assets/food_drinks/phat_kaphrao.jpg',
    emoji: 'üçõ',
    audioText: '‡∏ú‡∏±‡∏î‡∏Å‡∏∞‡πÄ‡∏û‡∏£‡∏≤',
    tags: ['spicy', 'popular'],
    isActive: true,
  },
  {
    thai: '‡∏ï‡πâ‡∏°‡∏¢‡∏≥‡∏Å‡∏∏‡πâ‡∏á',
    roman: 'tom yam goong',
    en: 'tom yum shrimp',
    category: 'thai-food',
    type: 'dish',
    level: 'Intermediate',
    imageUrl: '/assets/food_drinks/tom_yam.jpg',
    emoji: 'üç≤',
    audioText: '‡∏ï‡πâ‡∏°‡∏¢‡∏≥‡∏Å‡∏∏‡πâ‡∏á',
    tags: ['spicy', 'soup'],
    isActive: true,
  },
  {
    thai: '‡∏™‡πâ‡∏°‡∏ï‡∏≥',
    roman: 'som tam',
    en: 'papaya salad',
    category: 'thai-food',
    type: 'dish',
    level: 'Intermediate',
    imageUrl: '/assets/food_drinks/somtam.jpg',
    emoji: 'ü•ó',
    audioText: '‡∏™‡πâ‡∏°‡∏ï‡∏≥',
    tags: ['spicy', 'northeast'],
    isActive: true,
  },
  {
    thai: '‡∏ú‡∏±‡∏î‡πÑ‡∏ó‡∏¢',
    roman: 'phat thai',
    en: 'pad thai',
    category: 'thai-food',
    type: 'dish',
    level: 'Intermediate',
    imageUrl: '/assets/food_drinks/phat_thai.jpg',
    emoji: 'üçú',
    audioText: '‡∏ú‡∏±‡∏î‡πÑ‡∏ó‡∏¢',
    tags: ['popular', 'noodles'],
    isActive: true,
  },
  {
    thai: '‡πÅ‡∏Å‡∏á‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏´‡∏ß‡∏≤‡∏ô',
    roman: 'kaeng khiao wan',
    en: 'green curry',
    category: 'thai-food',
    type: 'dish',
    level: 'Intermediate',
    imageUrl: '/assets/food_drinks/kaeng_khiao.jpg',
    emoji: 'üçõ',
    audioText: '‡πÅ‡∏Å‡∏á‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏´‡∏ß‡∏≤‡∏ô',
    tags: ['spicy', 'curry'],
    isActive: true,
  },
  {
    thai: '‡∏Ç‡πâ‡∏≤‡∏ß‡∏°‡∏±‡∏ô‡πÑ‡∏Å‡πà',
    roman: 'khao man gai',
    en: 'hainanese chicken rice',
    category: 'thai-food',
    type: 'dish',
    level: 'Intermediate',
    imageUrl: '/assets/food_drinks/khao_man_gai.jpg',
    emoji: 'üçö',
    audioText: '‡∏Ç‡πâ‡∏≤‡∏ß‡∏°‡∏±‡∏ô‡πÑ‡∏Å‡πà',
    tags: ['mild', 'popular'],
    isActive: true,
  },
  {
    thai: '‡∏Å‡πã‡∏ß‡∏¢‡πÄ‡∏ï‡∏µ‡πã‡∏¢‡∏ß',
    roman: 'kuai tiao',
    en: 'noodles',
    category: 'thai-food',
    type: 'dish',
    level: 'Intermediate',
    imageUrl: '/assets/food_drinks/kuai_tiao.jpg',
    emoji: 'üç≤',
    audioText: '‡∏Å‡πã‡∏ß‡∏¢‡πÄ‡∏ï‡∏µ‡πã‡∏¢‡∏ß',
    tags: ['noodles', 'popular'],
    isActive: true,
  },
  {
    thai: '‡πÅ‡∏Å‡∏á‡∏à‡∏∑‡∏î',
    roman: 'kaeng chut',
    en: 'clear soup',
    category: 'thai-food',
    type: 'dish',
    level: 'Intermediate',
    imageUrl: '/assets/food_drinks/kaeng_chut.jpg',
    emoji: 'üç≤',
    audioText: '‡πÅ‡∏Å‡∏á‡∏à‡∏∑‡∏î',
    tags: ['mild', 'soup'],
    isActive: true,
  },
  {
    thai: '‡πÑ‡∏Ç‡πà‡πÄ‡∏à‡∏µ‡∏¢‡∏ß',
    roman: 'khai chiao',
    en: 'omelet',
    category: 'thai-food',
    type: 'dish',
    level: 'Intermediate',
    imageUrl: '/assets/food_drinks/khai_chiao.jpg',
    emoji: 'ü•ö',
    audioText: '‡πÑ‡∏Ç‡πà‡πÄ‡∏à‡∏µ‡∏¢‡∏ß',
    tags: ['simple', 'breakfast'],
    isActive: true,
  },
  {
    thai: '‡∏ô‡πâ‡∏≥‡πÄ‡∏õ‡∏•‡πà‡∏≤',
    roman: 'nam plao',
    en: 'plain water',
    category: 'thai-drink',
    type: 'drink',
    level: 'Intermediate',
    imageUrl: '/assets/food_drinks/nam_plao.jpg',
    emoji: 'üíß',
    audioText: '‡∏ô‡πâ‡∏≥‡πÄ‡∏õ‡∏•‡πà‡∏≤',
    tags: ['water', 'basic'],
    isActive: true,
  },
  {
    thai: '‡∏ô‡πâ‡∏≥‡πÅ‡∏Ç‡πá‡∏á',
    roman: 'nam khaeng',
    en: 'ice',
    category: 'thai-drink',
    type: 'modifier',
    level: 'Intermediate',
    imageUrl: '/assets/food_drinks/nam_khaeng.jpg',
    emoji: 'üßä',
    audioText: '‡∏ô‡πâ‡∏≥‡πÅ‡∏Ç‡πá‡∏á',
    tags: ['modifier', 'cold'],
    isActive: true,
  },
  {
    thai: '‡∏ô‡πâ‡∏≥‡∏ú‡∏•‡πÑ‡∏°‡πâ',
    roman: 'nam phonlamai',
    en: 'juice',
    category: 'thai-drink',
    type: 'drink',
    level: 'Intermediate',
    imageUrl: '/assets/food_drinks/nam_phonlamai.jpg',
    emoji: 'üßÉ',
    audioText: '‡∏ô‡πâ‡∏≥‡∏ú‡∏•‡πÑ‡∏°‡πâ',
    tags: ['juice', 'drink'],
    isActive: true,
  },
  {
    thai: '‡∏ä‡∏≤‡πÄ‡∏¢‡πá‡∏ô',
    roman: 'cha yen',
    en: 'thai iced tea',
    category: 'thai-drink',
    type: 'drink',
    level: 'Intermediate',
    imageUrl: '/assets/food_drinks/cha_yen.jpg',
    emoji: 'üçµ',
    audioText: '‡∏ä‡∏≤‡πÄ‡∏¢‡πá‡∏ô',
    tags: ['tea', 'popular'],
    isActive: true,
  },
  {
    thai: '‡∏Å‡∏≤‡πÅ‡∏ü‡πÄ‡∏¢‡πá‡∏ô',
    roman: 'kafe yen',
    en: 'iced coffee',
    category: 'thai-drink',
    type: 'drink',
    level: 'Intermediate',
    imageUrl: '/assets/food_drinks/kafe_yen.jpg',
    emoji: '‚òï',
    audioText: '‡∏Å‡∏≤‡πÅ‡∏ü‡πÄ‡∏¢‡πá‡∏ô',
    tags: ['coffee', 'popular'],
    isActive: true,
  },
  {
    thai: '‡∏ô‡∏°‡∏™‡∏î',
    roman: 'nom sod',
    en: 'fresh milk',
    category: 'thai-drink',
    type: 'drink',
    level: 'Intermediate',
    imageUrl: '/assets/food_drinks/nom_sod.jpg',
    emoji: 'ü•õ',
    audioText: '‡∏ô‡∏°‡∏™‡∏î',
    tags: ['milk', 'drink'],
    isActive: true,
  },
  {
    thai: '‡πÑ‡∏°‡πà‡πÄ‡∏ú‡πá‡∏î',
    roman: 'mai phet',
    en: 'not spicy',
    category: 'thai-modifier',
    type: 'modifier',
    level: 'Intermediate',
    imageUrl: '',
    emoji: 'üå∂Ô∏è',
    audioText: '‡πÑ‡∏°‡πà‡πÄ‡∏ú‡πá‡∏î',
    tags: ['spice-level', 'request'],
    isActive: true,
  },
  {
    thai: '‡πÄ‡∏ú‡πá‡∏î‡∏ô‡πâ‡∏≠‡∏¢',
    roman: 'phet noi',
    en: 'less spicy',
    category: 'thai-modifier',
    type: 'modifier',
    level: 'Intermediate',
    imageUrl: '',
    emoji: 'üå∂Ô∏è',
    audioText: '‡πÄ‡∏ú‡πá‡∏î‡∏ô‡πâ‡∏≠‡∏¢',
    tags: ['spice-level', 'request'],
    isActive: true,
  },
  {
    thai: '‡πÄ‡∏ú‡πá‡∏î‡∏°‡∏≤‡∏Å',
    roman: 'phet mak',
    en: 'very spicy',
    category: 'thai-modifier',
    type: 'modifier',
    level: 'Intermediate',
    imageUrl: '',
    emoji: 'üå∂Ô∏è',
    audioText: '‡πÄ‡∏ú‡πá‡∏î‡∏°‡∏≤‡∏Å',
    tags: ['spice-level', 'request'],
    isActive: true,
  },
  {
    thai: '‡∏´‡∏ß‡∏≤‡∏ô‡∏ô‡πâ‡∏≠‡∏¢',
    roman: 'wan noi',
    en: 'less sweet',
    category: 'thai-modifier',
    type: 'modifier',
    level: 'Intermediate',
    imageUrl: '',
    emoji: 'üçØ',
    audioText: '‡∏´‡∏ß‡∏≤‡∏ô‡∏ô‡πâ‡∏≠‡∏¢',
    tags: ['sweetness', 'request'],
    isActive: true,
  },
  {
    thai: '‡∏´‡∏ß‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥',
    roman: 'wan pokati',
    en: 'regular sweet',
    category: 'thai-modifier',
    type: 'modifier',
    level: 'Intermediate',
    imageUrl: '',
    emoji: 'üçØ',
    audioText: '‡∏´‡∏ß‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥',
    tags: ['sweetness', 'request'],
    isActive: true,
  },
  {
    thai: '‡πÑ‡∏°‡πà‡∏´‡∏ß‡∏≤‡∏ô',
    roman: 'mai wan',
    en: 'no sugar',
    category: 'thai-modifier',
    type: 'modifier',
    level: 'Intermediate',
    imageUrl: '',
    emoji: 'üçØ',
    audioText: '‡πÑ‡∏°‡πà‡∏´‡∏ß‡∏≤‡∏ô',
    tags: ['sweetness', 'request'],
    isActive: true,
  },
  {
    thai: '‡πÉ‡∏™‡πà‡πÑ‡∏Ç‡πà',
    roman: 'sai khai',
    en: 'add egg',
    category: 'thai-modifier',
    type: 'modifier',
    level: 'Intermediate',
    imageUrl: '',
    emoji: 'ü•ö',
    audioText: '‡πÉ‡∏™‡πà‡πÑ‡∏Ç‡πà',
    tags: ['ingredient', 'request'],
    isActive: true,
  },
  {
    thai: '‡πÑ‡∏°‡πà‡πÉ‡∏™‡πà‡∏ú‡∏á‡∏ä‡∏π‡∏£‡∏™',
    roman: 'mai sai phong chu rot',
    en: 'no MSG',
    category: 'thai-modifier',
    type: 'modifier',
    level: 'Intermediate',
    imageUrl: '',
    emoji: 'üßÇ',
    audioText: '‡πÑ‡∏°‡πà‡πÉ‡∏™‡πà‡∏ú‡∏á‡∏ä‡∏π‡∏£‡∏™',
    tags: ['ingredient', 'allergy'],
    isActive: true,
  },
  {
    thai: '‡πÄ‡∏°‡∏ô‡∏π‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£',
    roman: 'menu nae nam kheu arai',
    en: 'What is recommended?',
    category: 'thai-phrase',
    type: 'question',
    level: 'Intermediate',
    imageUrl: '',
    emoji: 'üçΩÔ∏è',
    audioText: '‡πÄ‡∏°‡∏ô‡∏π‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£',
    tags: ['question', 'menu'],
    isActive: true,
  },
  {
    thai: '‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà',
    roman: 'rakha thao rai',
    en: 'How much?',
    category: 'thai-phrase',
    type: 'question',
    level: 'Intermediate',
    imageUrl: '',
    emoji: 'üí∞',
    audioText: '‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà',
    tags: ['question', 'price'],
    isActive: true,
  },
  {
    thai: '‡∏°‡∏µ‡∏Å‡∏±‡∏ö‡∏Ç‡πâ‡∏≤‡∏ß‡∏°‡∏±‡∏á‡∏™‡∏ß‡∏¥‡∏£‡∏±‡∏ï‡∏¥‡πÑ‡∏´‡∏°',
    roman: 'mi kap khao mang sa wi rat mai',
    en: 'Do you have vegetarian options?',
    category: 'thai-phrase',
    type: 'question',
    level: 'Intermediate',
    imageUrl: '',
    emoji: 'ü•¨',
    audioText: '‡∏°‡∏µ‡∏Å‡∏±‡∏ö‡∏Ç‡πâ‡∏≤‡∏ß‡∏°‡∏±‡∏á‡∏™‡∏ß‡∏¥‡∏£‡∏±‡∏ï‡∏¥‡πÑ‡∏´‡∏°',
    tags: ['question', 'diet'],
    isActive: true,
  },
  {
    thai: '‡πÅ‡∏û‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ó‡∏∞‡πÄ‡∏•',
    roman: 'phae a han tha le',
    en: 'Allergic to seafood',
    category: 'thai-phrase',
    type: 'phrase',
    level: 'Intermediate',
    imageUrl: '',
    emoji: 'üö´',
    audioText: '‡πÅ‡∏û‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ó‡∏∞‡πÄ‡∏•',
    tags: ['allergy', 'health'],
    isActive: true,
  },
  {
    thai: '‡∏Ç‡∏≠‡∏≠‡∏µ‡∏Å‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏ó‡∏µ‡πà',
    roman: 'kho ik neung thi',
    en: 'One more, please',
    category: 'thai-phrase',
    type: 'phrase',
    level: 'Intermediate',
    imageUrl: '',
    emoji: 'üôè',
    audioText: '‡∏Ç‡∏≠‡∏≠‡∏µ‡∏Å‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏ó‡∏µ‡πà',
    tags: ['request', 'polite'],
    isActive: true,
  },
  {
    thai: '‡∏™‡∏±‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö‡∏ö‡πâ‡∏≤‡∏ô',
    roman: 'sang klap ban',
    en: 'Takeaway',
    category: 'thai-phrase',
    type: 'phrase',
    level: 'Intermediate',
    imageUrl: '',
    emoji: 'üè†',
    audioText: '‡∏™‡∏±‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö‡∏ö‡πâ‡∏≤‡∏ô',
    tags: ['order-type', 'service'],
    isActive: true,
  },
  {
    thai: '‡∏ó‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏£‡πâ‡∏≤‡∏ô',
    roman: 'than thi ran',
    en: 'For here',
    category: 'thai-phrase',
    type: 'phrase',
    level: 'Intermediate',
    imageUrl: '',
    emoji: 'ü™ë',
    audioText: '‡∏ó‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏£‡πâ‡∏≤‡∏ô',
    tags: ['order-type', 'service'],
    isActive: true,
  },
  {
    thai: '‡∏Ç‡∏≠‡∏ä‡πâ‡∏≠‡∏ô‡∏™‡πâ‡∏≠‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏°',
    roman: 'kho chon som pheum',
    en: 'Extra cutlery, please',
    category: 'thai-phrase',
    type: 'phrase',
    level: 'Intermediate',
    imageUrl: '',
    emoji: 'ü•Ñ',
    audioText: '‡∏Ç‡∏≠‡∏ä‡πâ‡∏≠‡∏ô‡∏™‡πâ‡∏≠‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏°',
    tags: ['request', 'service'],
    isActive: true,
  },
  {
    thai: '‡∏Ñ‡∏¥‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö',
    roman: 'khit ngoen duai khrap',
    en: 'Check please',
    category: 'thai-phrase',
    type: 'phrase',
    level: 'Intermediate',
    imageUrl: '',
    emoji: 'üí≥',
    audioText: '‡∏Ñ‡∏¥‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö',
    tags: ['payment', 'polite'],
    isActive: true,
  },
  {
    thai: '‡∏à‡πà‡∏≤‡∏¢‡∏î‡πâ‡∏ß‡∏¢‡∏ö‡∏±‡∏ï‡∏£‡πÑ‡∏î‡πâ‡πÑ‡∏´‡∏°',
    roman: 'chai duai bat dai mai',
    en: 'Can I pay by card?',
    category: 'thai-phrase',
    type: 'question',
    level: 'Intermediate',
    imageUrl: '',
    emoji: 'üí≥',
    audioText: '‡∏à‡πà‡∏≤‡∏¢‡∏î‡πâ‡∏ß‡∏¢‡∏ö‡∏±‡∏ï‡∏£‡πÑ‡∏î‡πâ‡πÑ‡∏´‡∏°',
    tags: ['payment', 'question'],
    isActive: true,
  },
  {
    thai: '‡∏Ç‡∏≠‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à',
    roman: 'kho bai set',
    en: 'Receipt, please',
    category: 'thai-phrase',
    type: 'phrase',
    level: 'Intermediate',
    imageUrl: '',
    emoji: 'üìÑ',
    audioText: '‡∏Ç‡∏≠‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à',
    tags: ['payment', 'request'],
    isActive: true,
  },
  {
    thai: '‡πÑ‡∏°‡πà‡πÄ‡∏ú‡πá‡∏î‡πÑ‡∏î‡πâ‡πÑ‡∏´‡∏°',
    roman: 'mai phet dai mai',
    en: 'Can it be not spicy?',
    category: 'thai-phrase',
    type: 'question',
    level: 'Intermediate',
    imageUrl: '',
    emoji: 'üå∂Ô∏è',
    audioText: '‡πÑ‡∏°‡πà‡πÄ‡∏ú‡πá‡∏î‡πÑ‡∏î‡πâ‡πÑ‡∏´‡∏°',
    tags: ['request', 'spice'],
    isActive: true,
  },
];

// Seed Function
const DEFAULT_MONGO_URI = process.env.MONGODB_URI;

const seedIntermediateFoodDrinks = async (options = {}) => {
  const { mongoUri = DEFAULT_MONGO_URI, skipConnect = false } = options;

  if (!mongoUri) {
    throw new Error('MONGODB_URI is not defined');
  }

  try {
    if (!skipConnect) {
      await mongoose.connect(mongoUri, {
        useNewUrlParser: true,
        useUnifiedTopology: true,
      });
      console.log('‚úì MongoDB connected for seeding Intermediate Food Drinks');
    }

    // Clear existing data
    await FoodDrinksVocab.deleteMany({});
    console.log('‚úì Cleared existing data');

    // Insert new data
    const result = await FoodDrinksVocab.insertMany(foodDrinksData);
    console.log(`‚úì Inserted ${result.length} food & drinks vocabulary items`);
  } catch (err) {
    console.error('‚úó Seed error:', err);
    throw err;
  } finally {
    if (!skipConnect) {
      await mongoose.disconnect();
      console.log('‚úì Connection closed');
    }
  }
};

if (require.main === module) {
  seedIntermediateFoodDrinks()
    .then(() => process.exit(0))
    .catch(async (err) => {
      console.error('‚úó Seed error:', err);
      try {
        await mongoose.disconnect();
      } catch (disconnectError) {
        console.error('‚ö†Ô∏è Failed to disconnect MongoDB cleanly:', disconnectError);
      }
      process.exit(1);
    });
}

module.exports = seedIntermediateFoodDrinks;
